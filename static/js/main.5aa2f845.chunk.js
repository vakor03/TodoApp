(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(53),i=n.n(o),a=n(26),r=n(6),d=n(3);var s=function(e){var t=Object(c.useState)(e.edit?e.edit.task:""),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(c.useRef)(null);Object(c.useEffect)((function(){a.current.focus()}));var s=function(e){i(e.target.value)};return Object(d.jsx)("form",{className:"todo-form",onSubmit:function(t){t.preventDefault(),e.onSubmit({task:o}),i("")},children:e.edit?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Update your item",value:o,name:"text",className:"todo-input edit",onChange:s,ref:a}),Object(d.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Add new todo",value:o,name:"text",className:"todo-input",onChange:s,ref:a}),Object(d.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},j=n(47);var l,u,b,O,m,h=function(e){var t=e.todo,n=e.completeTodo,o=e.removeTodo,i=e.updateTodo,a=Object(c.useState)({id:null,task:"",completed:!1}),l=Object(r.a)(a,2),u=l[0],b=l[1];return u.id!==t.id?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:t.completed?"todo-row complete":"todo-row",children:[Object(d.jsx)("div",{onClick:function(){return n(t.id,t.completed)},children:t.task},t.id),Object(d.jsxs)("div",{className:"icons",children:[Object(d.jsx)(j.a,{onClick:function(){return o(t.id,t.completed)},className:"delete-icon"}),Object(d.jsx)(j.b,{onClick:function(){return b({id:t.id,task:t.task,completed:t.completed})},className:"edit-icon"})]})]})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(s,{edit:u,onSubmit:function(e){i(u.id,e.task),b({id:null,task:"",completed:!1})}})})},p=n(92),x=n(98),f=n(23),v=n(101),g=Object(v.a)(l||(l=Object(f.a)(["\n    mutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos(\n            where: { id: { _eq: $id } }\n            _set: { completed: $completed }\n        ) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),k=Object(v.a)(u||(u=Object(f.a)(["\n    mutation CompleteTodo($id: Int!, $title: String!) {\n        update_todos(where: { id: { _eq: $id } }, _set: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),w=Object(v.a)(b||(b=Object(f.a)(["\n    mutation AddTodo($title: String!) {\n        insert_todos(objects: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),N=Object(v.a)(O||(O=Object(f.a)(["\n    mutation RemoveTodo($id: Int!) {\n        delete_todos(where: { id: { _eq: $id } }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),S=Object(v.a)(m||(m=Object(f.a)(["\n    subscription NewTaskSubscription {\n        todos(order_by: { id: asc }) {\n            id\n            title\n            completed\n        }\n    }\n"])));n(73);var T=function(){return Object(d.jsxs)("div",{className:"lds-default",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})};var $=function(){var e=Object(p.a)(k),t=Object(r.a)(e,2),n=t[0],o=t[1].error,i=Object(p.a)(N),j=Object(r.a)(i,2),l=j[0],u=j[1].error,b=Object(p.a)(g),O=Object(r.a)(b,2),m=O[0],f=O[1].error,v=Object(p.a)(w),$=Object(r.a)(v,2),y=$[0],C=$[1].error,_=Object(x.a)(S),A=_.data,q=_.loading,I=_.error,B=Object(a.b)(),P=B.loginWithRedirect,z=B.logout,D=B.isAuthenticated,E=B.loading,F=Object(c.useState)(!1),R=Object(r.a)(F,2),U=R[0],W=R[1];function J(){alert("You are currently offline or some functions are disabled. Please check your Internet connection and try again")}window.onoffline=function(){W(!0)},window.ononline=function(){W(!1)};var L=function(e,t){U?J():m({variables:{id:e,completed:!t}})},G=function(e){U?J():l({variables:{id:e}})},Q=function(e,t){t&&!/^\s*$/.test(t.text)&&(U?J():n({variables:{id:e,title:t}}))};return q||E?Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Wait a second"}),Object(d.jsx)(T,{})]}):D?I||o||u||C||f?Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Something got wrong"}),Object(d.jsx)("h1",{children:"Please reload the page"}),Object(d.jsx)(T,{})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"What's the plan for Today?"}),Object(d.jsx)(s,{onSubmit:function(e){if(e.task&&!/^\s*$/.test(e.text))if(U)J();else{var t={title:e.task};y({variables:t})}}}),A.todos.map((function(e){return Object(d.jsx)(h,{todo:{id:e.id,task:e.title,completed:e.completed},completeTodo:L,removeTodo:G,updateTodo:Q},e.id)})),Object(d.jsx)("button",{onClick:function(){return z()},className:"auth-button",children:"Log out"})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Please log in to start:"}),Object(d.jsx)("button",{onClick:function(){return P()},className:"auth-button",children:"Log In"})]})};n(74);var y=function(){return Object(d.jsx)("div",{className:"todo-app",children:Object(d.jsx)($,{})})},C=n(48),_=n(45),A=n.n(_),q=n(55),I=n(88),B=n(99),P=n(102),z=n(100),D=n(58),E=n(56);var F=function(e){var t=e.children,n=Object(a.b)(),o=n.isAuthenticated,i=n.getAccessTokenSilently,s=Object(c.useState)(),j=Object(r.a)(s,2),l=j[0],u=j[1],b=[];Object(c.useEffect)((function(){(function(){var e=Object(q.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=7;break}return e.next=4,i();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0="";case 8:t=e.t0,u(t),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),b.push(e.t1.message),console.error(e.t1.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[o,i]);var O=Object(D.a)((function(e,t){var n=t.headers;return l?{headers:Object(C.a)(Object(C.a)({},n),{},{Authorization:"Bearer ".concat(l)})}:{headers:n}})),m=new E.a({uri:"wss://natural-coral-28.hasura.app/v1/graphql",options:{reconnect:!0,connectionParams:function(){return{headers:{Authorization:"Bearer ".concat(l)}}}}}),h=new I.a({link:Object(B.a)(O,m),cache:new P.a({typePolicies:{Subscription:{fields:{todos:{merge:!1}}}}})});return Object(d.jsx)(z.a,{client:h,errors:b,children:t})};i.a.render(Object(d.jsx)(a.a,{domain:"dev-qaszft5o.us.auth0.com",clientId:"yqVrCmrGQdD9bxRmDXc5E9OB1pted5Dj",redirectUri:"https://vakor03.github.io/TodoApp",audience:"https://dev-qaszft5o.us.auth0.com/api/v2/",children:Object(d.jsx)(F,{children:Object(d.jsx)(y,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.5aa2f845.chunk.js.map