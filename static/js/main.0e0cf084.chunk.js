(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{21:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),a=n(10),s=n.n(a),c=n(9),d=n(11),i=n(12),u=n(14),l=n(13),p=n(5),m=n(0);var b=function(t){var e=Object(o.useState)(t.edit?t.edit.task:""),n=Object(p.a)(e,2),r=n[0],a=n[1],s=Object(o.useRef)(null);Object(o.useEffect)((function(){s.current.focus()}));var c=function(t){a(t.target.value)};return Object(m.jsx)("form",{className:"todo-form",onSubmit:function(e){e.preventDefault(),t.onSubmit({task:r}),a("")},children:t.edit?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"text",placeholder:"Update your item",value:r,name:"text",className:"todo-input edit",onChange:c,ref:s}),Object(m.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"text",placeholder:"Add new todo",value:r,name:"text",className:"todo-input",onChange:c,ref:s}),Object(m.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},j=n(8);var f=function(t){var e=t.todo,n=t.completeTodo,r=t.removeTodo,a=t.updateTodo,s=Object(o.useState)({id:null,task:"",completed:!1}),c=Object(p.a)(s,2),d=c[0],i=c[1];return d.id!==e.id?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:e.completed?"todo-row complete":"todo-row",children:[Object(m.jsx)("div",{onClick:function(){return n(e.id)},children:e.task},e.id),Object(m.jsxs)("div",{className:"icons",children:[Object(m.jsx)(j.a,{onClick:function(){return r(e.id,e.completed)},className:"delete-icon"}),Object(m.jsx)(j.b,{onClick:function(){return i({id:e.id,task:e.task,completed:e.completed})},className:"edit-icon"})]})]})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(b,{edit:d,onSubmit:function(t){a(d.id,t.task),i({id:null,task:"",completed:!1})}})})},k=n(3),h=n.n(k),x=n(7);function v(t,e,n){return O.apply(this,arguments)}function O(){return(O=Object(x.a)(h.a.mark((function t(e,n,o){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://todo-vakor-api.hasura.app/v1/graphql",{headers:{"content-type":"application/json","x-hasura-admin-secret":"WagKYQUh0NIv5z5XXgQ9JNRiu2YZVOr1kpWdCMRvqGYAJc192UxH5rpwXGJAlcMV"},method:"POST",body:JSON.stringify({query:e,variables:o,operationName:n})});case 2:return r=t.sent,t.next=5,r.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var T="\n  query Get{\n    todos {\n      id\n      task\n      completed\n    }\n  }\n  \n  mutation RemoveTodo($id: Int!) {\n  delete_todos_by_pk(id: $id){\n    id\n  }  \n}\n\n    mutation UpdateTodo($id: Int!, $task: String!) {\n        update_todos_by_pk(pk_columns: {id: $id}, _set: {task:$task}) {\n            task\n    }\n}\nmutation AddTodo($todo: todos_insert_input!) {\n  insert_todos(objects: [$todo]) {\n    affected_rows\n  }\n}\nmutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos_by_pk(pk_columns: {id: $id}, _set: {completed:$completed}) {\n            completed\n    }\n}\n";function y(t){return v(T,t,{})}function S(t,e){return v(T,t,{todo:{task:e.task,completed:"false"}})}function _(t,e){return v(T,t,{id:e})}function g(t,e){return v(T,t,{id:e.id,task:e.task})}function N(t,e){return v(T,t,{id:e.id,completed:e.completed})}var $=function(){var t=Object(x.a)(h.a.mark((function t(e,n){var o,r,a,s,c,d,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],r="",t.t0=e,t.next="Get"===t.t0?5:"AddTodo"===t.t0?11:"CompleteTodo"===t.t0?17:"RemoveTodo"===t.t0?23:"UpdateTodo"===t.t0?29:35;break;case 5:return t.next=7,y(e);case 7:return a=t.sent,o=a.errors,r=a.data,t.abrupt("break",35);case 11:return t.next=13,S(e,n);case 13:return s=t.sent,o=s.errors,r=s.data,t.abrupt("break",35);case 17:return t.next=19,N(e,n);case 19:return c=t.sent,o=c.errors,r=c.data,t.abrupt("break",35);case 23:return t.next=25,_(e,n);case 25:return d=t.sent,o=d.errors,r=d.data,t.abrupt("break",35);case 29:return t.next=31,g(e,n);case 31:return i=t.sent,o=i.errors,r=i.data,t.abrupt("break",35);case 35:return o&&console.error(o),t.abrupt("return",r);case 37:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(d.a)(this,n),(t=e.call(this)).read=function(){$("Get",null).then((function(e){t.setState({todos:e.todos},(function(){return t.setState({currentId:e.todos.last?e.todos.last.id+1:1})}))}))},t.state={todos:[],currentId:0},t.read(),t}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.state.todos,n=function(n,o){$("CompleteTodo",{id:n,completed:!o});var r=e.map((function(t){return t.id===n&&(t.completed=!t.completed),t}));t.setState({todos:r})},o=function(n){$("RemoveTodo",n);var o=Object(c.a)(e).filter((function(t){return t.id!==n}));t.setState({todos:o})},r=function(n,o){o&&!/^\s*$/.test(o.text)&&(console.log(o),$("UpdateTodo",{id:n,task:o}),t.setState({todos:e.map((function(t){return t.id===n&&(t.task=o),t}))}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"What's the plan for Today?"}),Object(m.jsx)(b,{onSubmit:function(n){if(n.task&&!/^\s*$/.test(n.text)){$("AddTodo",n);var o=[{id:t.state.currentId,task:n.task,completed:!1}].concat(Object(c.a)(e));t.setState({todos:o}),t.setState({currentId:t.state.currentId+1})}}}),e.map((function(t){return Object(m.jsx)(f,{todo:t,completeTodo:n,removeTodo:o,updateTodo:r})}))]})}}]),n}(o.Component);n(21);var C=function(){return Object(m.jsx)("div",{className:"todo-app",children:Object(m.jsx)(w,{})})};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.0e0cf084.chunk.js.map