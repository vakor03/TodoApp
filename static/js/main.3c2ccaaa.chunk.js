(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{73:function(t,e,n){},74:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var c=n(2),o=n(53),i=n.n(o),a=n(26),d=n(6),r=n(3);var s=function(t){var e=Object(c.useState)(t.edit?t.edit.task:""),n=Object(d.a)(e,2),o=n[0],i=n[1],a=Object(c.useRef)(null);Object(c.useEffect)((function(){a.current.focus()}));var s=function(t){i(t.target.value)};return Object(r.jsx)("form",{className:"todo-form",onSubmit:function(e){e.preventDefault(),t.onSubmit({task:o}),i("")},children:t.edit?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"text",placeholder:"Update your item",value:o,name:"text",className:"todo-input edit",onChange:s,ref:a}),Object(r.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"text",placeholder:"Add new todo",value:o,name:"text",className:"todo-input",onChange:s,ref:a}),Object(r.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},l=n(47);var j,u,b,O,p,m=function(t){var e=t.todo,n=t.completeTodo,o=t.removeTodo,i=t.updateTodo,a=Object(c.useState)({id:null,task:"",completed:!1}),j=Object(d.a)(a,2),u=j[0],b=j[1];return u.id!==e.id?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:e.completed?"todo-row complete":"todo-row",children:[Object(r.jsx)("div",{onClick:function(){return n(e.id)},children:e.task},e.id),Object(r.jsxs)("div",{className:"icons",children:[Object(r.jsx)(l.a,{onClick:function(){return o(e.id,e.completed)},className:"delete-icon"}),Object(r.jsx)(l.b,{onClick:function(){return b({id:e.id,task:e.task,completed:e.completed})},className:"edit-icon"})]})]})}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(s,{edit:u,onSubmit:function(t){i(u.id,t.task),b({id:null,task:"",completed:!1})}})})},h=n(92),f=n(98),x=n(23),v=n(101),g=Object(v.a)(j||(j=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos(\n            where: { id: { _eq: $id } }\n            _set: { completed: $completed }\n        ) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),k=Object(v.a)(u||(u=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $title: String!) {\n        update_todos(where: { id: { _eq: $id } }, _set: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),w=Object(v.a)(b||(b=Object(x.a)(["\n    mutation AddTodo($title: String!) {\n        insert_todos(objects: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),N=Object(v.a)(O||(O=Object(x.a)(["\n    mutation RemoveTodo($id: Int!) {\n        delete_todos(where: { id: { _eq: $id } }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),T=Object(v.a)(p||(p=Object(x.a)(["\n    subscription NewTaskSubscription {\n        todos(order_by: { id: asc }) {\n            id\n            title\n            completed\n        }\n    }\n"])));n(73);var $=function(){return Object(r.jsxs)("div",{className:"lds-default",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})};var S=function(){var t=Object(h.a)(k),e=Object(d.a)(t,1)[0],n=Object(h.a)(N),o=Object(d.a)(n,1)[0],i=Object(h.a)(g),l=Object(d.a)(i,1)[0],j=Object(h.a)(w),u=Object(d.a)(j,1)[0],b=Object(f.a)(T),O=b.data,p=b.loading,x=b.error,v=Object(a.b)(),S=v.loginWithRedirect,y=v.logout,C=v.isAuthenticated,_=v.loading,A=Object(c.useState)(!1),q=Object(d.a)(A,2),I=q[0],B=q[1];function E(){alert("You are currently offline, all functions are disabled!")}window.onoffline=function(){B(!0)},window.ononline=function(){B(!1)};var z=function(t,e){I?E():l({variables:{id:t,completed:!e}})},D=function(t){I?E():o({variables:{id:t}})},F=function(t,n){n&&!/^\s*$/.test(n.text)&&(I?E():e({variables:{id:t,title:n}}))};return p||_?Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Wait a second"}),Object(r.jsx)($,{})]}):C?x?Object(r.jsx)("p",{children:"Error"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"What's the plan for Today?"}),Object(r.jsx)(s,{onSubmit:function(t){if(t.task&&!/^\s*$/.test(t.text))if(I)E();else{var e={title:t.task};u({variables:e})}}}),O.todos.map((function(t){return Object(r.jsx)(m,{todo:{id:t.id,task:t.title,completed:t.completed},completeTodo:z,removeTodo:D,updateTodo:F},t.id)})),Object(r.jsx)("button",{onClick:function(){return y()},className:"auth-button",children:"Log out"})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Please log in to start:"}),Object(r.jsx)("button",{onClick:function(){return S()},className:"auth-button",children:"Log In"})]})};n(74);var y=function(){return Object(r.jsx)("div",{className:"todo-app",children:Object(r.jsx)(S,{})})},C=n(48),_=n(45),A=n.n(_),q=n(55),I=n(88),B=n(99),E=n(102),z=n(100),D=n(58),F=n(56);var R=function(t){var e=t.children,n=Object(a.b)(),o=n.isAuthenticated,i=n.getAccessTokenSilently,s=Object(c.useState)(),l=Object(d.a)(s,2),j=l[0],u=l[1];Object(c.useEffect)((function(){(function(){var t=Object(q.a)(A.a.mark((function t(){var e;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!o){t.next=7;break}return t.next=4,i();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0="";case 8:e=t.t0,u(e),t.next=15;break;case 12:t.prev=12,t.t1=t.catch(0),console.error(t.t1.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}})()()}),[o,i]);var b=Object(D.a)((function(t,e){var n=e.headers;return j?{headers:Object(C.a)(Object(C.a)({},n),{},{Authorization:"Bearer ".concat(j)})}:{headers:n}})),O=new F.a({uri:"wss://natural-coral-28.hasura.app/v1/graphql",options:{reconnect:!0,connectionParams:function(){return{headers:{Authorization:"Bearer ".concat(j)}}}}}),p=new I.a({link:Object(B.a)(b,O),cache:new E.a({typePolicies:{Subscription:{fields:{todos:{merge:!1}}}}})});return Object(r.jsx)(z.a,{client:p,children:e})};i.a.render(Object(r.jsx)(a.a,{domain:"dev-qaszft5o.us.auth0.com",clientId:"yqVrCmrGQdD9bxRmDXc5E9OB1pted5Dj",redirectUri:"http://vakor03.github.io/TodoApp",audience:"https://dev-qaszft5o.us.auth0.com/api/v2/",children:Object(r.jsx)(R,{children:Object(r.jsx)(y,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.3c2ccaaa.chunk.js.map