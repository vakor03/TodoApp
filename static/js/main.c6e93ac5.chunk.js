(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(53),i=n.n(o),a=n(26),r=n(6),s=n(3);var d=function(e){var t=Object(c.useState)(e.edit?e.edit.task:""),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(c.useRef)(null);Object(c.useEffect)((function(){a.current.focus()}));var d=function(e){i(e.target.value)};return Object(s.jsx)("form",{className:"todo-form",onSubmit:function(t){t.preventDefault(),e.onSubmit({task:o}),i("")},children:e.edit?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{type:"text",placeholder:"Update your item",value:o,name:"text",className:"todo-input edit",onChange:d,ref:a}),Object(s.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{type:"text",placeholder:"Add new todo",value:o,name:"text",className:"todo-input",onChange:d,ref:a}),Object(s.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},l=n(47);var j,u,b,O,m,p=function(e){var t=e.todo,n=e.completeTodo,o=e.removeTodo,i=e.updateTodo,a=Object(c.useState)({id:null,task:"",completed:!1}),j=Object(r.a)(a,2),u=j[0],b=j[1];return u.id!==t.id?Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:t.completed?"todo-row complete":"todo-row",children:[Object(s.jsx)("div",{onClick:function(){return n(t.id)},children:t.task},t.id),Object(s.jsxs)("div",{className:"icons",children:[Object(s.jsx)(l.a,{onClick:function(){return o(t.id,t.completed)},className:"delete-icon"}),Object(s.jsx)(l.b,{onClick:function(){return b({id:t.id,task:t.task,completed:t.completed})},className:"edit-icon"})]})]})}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(d,{edit:u,onSubmit:function(e){i(u.id,e.task),b({id:null,task:"",completed:!1})}})})},h=n(92),f=n(98),x=n(23),v=n(101),g=Object(v.a)(j||(j=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos(\n            where: { id: { _eq: $id } }\n            _set: { completed: $completed }\n        ) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),k=Object(v.a)(u||(u=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $title: String!) {\n        update_todos(where: { id: { _eq: $id } }, _set: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),w=Object(v.a)(b||(b=Object(x.a)(["\n    mutation AddTodo($title: String!) {\n        insert_todos(objects: { title: $title }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),N=Object(v.a)(O||(O=Object(x.a)(["\n    mutation RemoveTodo($id: Int!) {\n        delete_todos(where: { id: { _eq: $id } }) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),T=Object(v.a)(m||(m=Object(x.a)(["\n    subscription NewTaskSubscription {\n        todos(order_by: { id: asc }) {\n            id\n            title\n            completed\n        }\n    }\n"])));n(73);var $=function(){return Object(s.jsxs)("div",{className:"lds-default",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})};var S=function(){var e=Object(h.a)(k),t=Object(r.a)(e,1)[0],n=Object(h.a)(N),o=Object(r.a)(n,1)[0],i=Object(h.a)(g),l=Object(r.a)(i,1)[0],j=Object(h.a)(w),u=Object(r.a)(j,1)[0],b=Object(f.a)(T),O=b.data,m=b.loading,x=b.error,v=Object(a.b)(),S=v.loginWithRedirect,y=v.logout,C=v.isAuthenticated,_=v.loading,A=Object(c.useState)(!1),q=Object(r.a)(A,2),I=q[0],B=q[1];function E(){alert("You are currently offline, all functions are disabled!")}window.onoffline=function(){B(!0)},window.ononline=function(){B(!1)};var z=function(e,t){x||alert(x.message),l({variables:{id:e,completed:!t}})},D=function(e){I?E():o({variables:{id:e}})},F=function(e,n){n&&!/^\s*$/.test(n.text)&&(I?E():t({variables:{id:e,title:n}}))};return m||_?Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Wait a second"}),Object(s.jsx)($,{})]}):C?x?Object(s.jsx)("p",{children:"Error"}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"What's the plan for Today?"}),Object(s.jsx)(d,{onSubmit:function(e){if(e.task&&!/^\s*$/.test(e.text))if(I)E();else{var t={title:e.task};u({variables:t})}}}),O.todos.map((function(e){return Object(s.jsx)(p,{todo:{id:e.id,task:e.title,completed:e.completed},completeTodo:z,removeTodo:D,updateTodo:F},e.id)})),Object(s.jsx)("button",{onClick:function(){return y()},className:"auth-button",children:"Log out"})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Please log in to start:"}),Object(s.jsx)("button",{onClick:function(){return S()},className:"auth-button",children:"Log In"})]})};n(74);var y=function(){return Object(s.jsx)("div",{className:"todo-app",children:Object(s.jsx)(S,{})})},C=n(48),_=n(45),A=n.n(_),q=n(55),I=n(88),B=n(99),E=n(102),z=n(100),D=n(58),F=n(56);var R=function(e){var t=e.children,n=Object(a.b)(),o=n.isAuthenticated,i=n.getAccessTokenSilently,d=Object(c.useState)(),l=Object(r.a)(d,2),j=l[0],u=l[1],b=[];Object(c.useEffect)((function(){(function(){var e=Object(q.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=7;break}return e.next=4,i();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0="";case 8:t=e.t0,u(t),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),b.push(e.t1.message),console.error(e.t1.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[o,i]);var O=Object(D.a)((function(e,t){var n=t.headers;return j?{headers:Object(C.a)(Object(C.a)({},n),{},{Authorization:"Bearer ".concat(j)})}:{headers:n}})),m=new F.a({uri:"wss://natural-coral-28.hasura.app/v1/graphql",options:{reconnect:!0,connectionParams:function(){return{headers:{Authorization:"Bearer ".concat(j)}}}}}),p=new I.a({link:Object(B.a)(O,m),cache:new E.a({typePolicies:{Subscription:{fields:{todos:{merge:!1}}}}})});return Object(s.jsx)(z.a,{client:p,errors:b,children:t})};i.a.render(Object(s.jsx)(a.a,{domain:"dev-qaszft5o.us.auth0.com",clientId:"yqVrCmrGQdD9bxRmDXc5E9OB1pted5Dj",redirectUri:"https://vakor03.github.io/TodoApp",audience:"https://dev-qaszft5o.us.auth0.com/api/v2/",children:Object(s.jsx)(R,{children:Object(s.jsx)(y,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.c6e93ac5.chunk.js.map