(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{30:function(t){t.exports=JSON.parse('{"auth-domain":"dev-qaszft5o.us.auth0.com","auth-client-id":"yqVrCmrGQdD9bxRmDXc5E9OB1pted5Dj","auth-audience":"https://dev-qaszft5o.us.auth0.com/api/v2/","hasura-uri":"wss://natural-coral-28.hasura.app/v1/graphql"}')},74:function(t,e,n){},75:function(t,e,n){},87:function(t,e,n){"use strict";n.r(e);var c=n(2),i=n(54),o=n.n(i),a=n(26),d=n(7),r=n(3);var s=function(t){var e=Object(c.useState)(t.edit?t.edit.task:""),n=Object(d.a)(e,2),i=n[0],o=n[1],a=Object(c.useRef)(null);Object(c.useEffect)((function(){a.current.focus()}));var s=function(t){o(t.target.value)};return Object(r.jsx)("form",{className:"todo-form",onSubmit:function(e){e.preventDefault(),t.onSubmit({task:i}),o("")},children:t.edit?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"text",placeholder:"Update your item",value:i,name:"text",className:"todo-input edit",onChange:s,ref:a}),Object(r.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"text",placeholder:"Add new todo",value:i,name:"text",className:"todo-input",onChange:s,ref:a}),Object(r.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},u=n(48);var j,l,b,O,h,m=function(t){var e=t.todo,n=t.completeTodo,i=t.removeTodo,o=t.updateTodo,a=Object(c.useState)({id:null,task:"",completed:!1}),j=Object(d.a)(a,2),l=j[0],b=j[1];return l.id!==e.id?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:e.completed?"todo-row complete":"todo-row",children:[Object(r.jsx)("div",{onClick:function(){return n(e.id)},children:e.task},e.id),Object(r.jsxs)("div",{className:"icons",children:[Object(r.jsx)(u.a,{onClick:function(){return i(e.id,e.completed)},className:"delete-icon"}),Object(r.jsx)(u.b,{onClick:function(){return b({id:e.id,task:e.task,completed:e.completed})},className:"edit-icon"})]})]})}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(s,{edit:l,onSubmit:function(t){o(l.id,t.task),b({id:null,task:"",completed:!1})}})})},p=n(93),x=n(99),v=n(23),f=n(102),g=Object(f.a)(j||(j=Object(v.a)(["\n    mutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos(where: {id: {_eq: $id}}, _set: {completed: $completed}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),k=Object(f.a)(l||(l=Object(v.a)(["\n    mutation CompleteTodo($id: Int!, $title: String!) {\n        update_todos(where: {id: {_eq: $id}}, _set: {title: $title}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),w=Object(f.a)(b||(b=Object(v.a)(["\n    mutation AddTodo($title: String!) {\n        insert_todos(objects: {title: $title}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),N=Object(f.a)(O||(O=Object(v.a)(["\n    mutation RemoveTodo($id: Int!) {\n        delete_todos(where: {id: {_eq: $id}}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),T=Object(f.a)(h||(h=Object(v.a)(["\n    subscription NewTaskSubscription {\n        todos(order_by: {id: asc}) {\n            id\n            title\n            completed\n        }\n    }\n"])));n(74);var $=function(){return Object(r.jsxs)("div",{className:"lds-default",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})};var S=function(){var t=Object(p.a)(k),e=Object(d.a)(t,1)[0],n=Object(p.a)(N),c=Object(d.a)(n,1)[0],i=Object(p.a)(g),o=Object(d.a)(i,1)[0],u=Object(p.a)(w),j=Object(d.a)(u,2),l=j[0],b=(j[1].loading,Object(x.a)(T)),O=b.data,h=b.loading,v=b.error,f=Object(a.b)(),S=f.loginWithRedirect,y=f.logout,C=f.isAuthenticated,_=f.loading,A=function(t,e){o({variables:{id:t,completed:!e}})},q=function(t){c({variables:{id:t}})},I=function(t,n){n&&!/^\s*$/.test(n.text)&&e({variables:{id:t,title:n}})};return h||_?Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Wait a second"}),Object(r.jsx)($,{})]}):C?v?Object(r.jsx)("p",{children:"Error"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"What's the plan for Today?"}),Object(r.jsx)(s,{onSubmit:function(t){if(t.task&&!/^\s*$/.test(t.text)){var e={title:t.task};l({variables:e})}}}),O.todos.map((function(t){return Object(r.jsx)(m,{todo:{id:t.id,task:t.title,completed:t.completed},completeTodo:A,removeTodo:q,updateTodo:I})})),Object(r.jsx)("button",{onClick:function(){return y()},className:"auth-button",children:"Log out"})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Please log in to start:"}),Object(r.jsx)("button",{onClick:function(){return S()},className:"auth-button",children:"Log In"})]})};n(75);var y=function(){return Object(r.jsx)("div",{className:"todo-app",children:Object(r.jsx)(S,{})})},C=n(49),_=n(46),A=n.n(_),q=n(56),I=n(89),B=n(100),E=n(103),z=n(101),D=n(59),F=n(57),R=n(30);var J=function(t){var e=t.children,n=Object(a.b)(),i=n.isAuthenticated,o=n.getAccessTokenSilently,s=Object(c.useState)(),u=Object(d.a)(s,2),j=u[0],l=u[1];Object(c.useEffect)((function(){(function(){var t=Object(q.a)(A.a.mark((function t(){var e;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=6;break}return t.next=3,o();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0="";case 7:e=t.t0,l(e);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[i,o]);var b=Object(D.a)((function(t,e){var n=e.headers;return j?{headers:Object(C.a)(Object(C.a)({},n),{},{Authorization:"Bearer ".concat(j)})}:{headers:n}})),O=new F.a({uri:R["hasura-uri"],options:{reconnect:!0,connectionParams:function(){return{headers:{Authorization:"Bearer ".concat(j)}}}}}),h=new I.a({link:Object(B.a)(b,O),cache:new E.a({typePolicies:{Subscription:{fields:{todos:{merge:!1}}}}})});return Object(r.jsx)(z.a,{client:h,children:e})};o.a.render(Object(r.jsx)(a.a,{domain:R["auth-domain"],clientId:R["auth-client-id"],redirectUri:"https://vakor03.github.io/TodoApp",audience:R["auth-audience"],children:Object(r.jsx)(J,{children:Object(r.jsx)(y,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.357e5604.chunk.js.map