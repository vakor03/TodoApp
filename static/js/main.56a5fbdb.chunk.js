(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{25:function(t){t.exports=JSON.parse('{"auth-domain":"dev-qaszft5o.us.auth0.com","auth-client-id":"yqVrCmrGQdD9bxRmDXc5E9OB1pted5Dj","auth-redirect-uri":"https://vakor03.github.io/TodoApp","auth-audience":"hasura","hasura-uri":"wss://natural-coral-28.hasura.app/v1/graphql"}')},74:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var c=n(2),a=n(54),i=n.n(a),o=n(27),r=n(7),d=n(4);var s=function(t){var e=Object(c.useState)(t.edit?t.edit.task:""),n=Object(r.a)(e,2),a=n[0],i=n[1],o=Object(c.useRef)(null);Object(c.useEffect)((function(){o.current.focus()}));var s=function(t){i(t.target.value)};return Object(d.jsx)("form",{className:"todo-form",onSubmit:function(e){e.preventDefault(),t.onSubmit({task:a}),i("")},children:t.edit?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Update your item",value:a,name:"text",className:"todo-input edit",onChange:s,ref:o}),Object(d.jsx)("button",{className:"todo-button edit",children:"Update"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Add new todo",value:a,name:"text",className:"todo-input",onChange:s,ref:o}),Object(d.jsx)("button",{className:"todo-button",children:"Add todo"})]})})},u=n(48);var l,j,b,p,O,m=function(t){var e=t.todo,n=t.completeTodo,a=t.removeTodo,i=t.updateTodo,o=Object(c.useState)({id:null,task:"",completed:!1}),l=Object(r.a)(o,2),j=l[0],b=l[1];return j.id!==e.id?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:e.completed?"todo-row complete":"todo-row",children:[Object(d.jsx)("div",{onClick:function(){return n(e.id)},children:e.task},e.id),Object(d.jsxs)("div",{className:"icons",children:[Object(d.jsx)(u.a,{onClick:function(){return a(e.id,e.completed)},className:"delete-icon"}),Object(d.jsx)(u.b,{onClick:function(){return b({id:e.id,task:e.task,completed:e.completed})},className:"edit-icon"})]})]})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(s,{edit:j,onSubmit:function(t){i(j.id,t.task),b({id:null,task:"",completed:!1})}})})},h=n(92),f=n(98),x=n(23),v=n(101),g=Object(v.a)(l||(l=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $completed: Boolean!) {\n        update_todos(where: {id: {_eq: $id}}, _set: {completed: $completed}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),k=Object(v.a)(j||(j=Object(x.a)(["\n    mutation CompleteTodo($id: Int!, $title: String!) {\n        update_todos(where: {id: {_eq: $id}}, _set: {title: $title}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),w=Object(v.a)(b||(b=Object(x.a)(["\n    mutation AddTodo($title: String!) {\n        insert_todos(objects: {title: $title}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),T=Object(v.a)(p||(p=Object(x.a)(["\n    mutation RemoveTodo($id: Int!) {\n        delete_todos(where: {id: {_eq: $id}}) {\n            returning {\n                id\n                title\n                completed\n            }\n        }\n    }\n"]))),$=Object(v.a)(O||(O=Object(x.a)(["\n    subscription NewTaskSubscription {\n        todos(order_by: {id: asc}) {\n            id\n            title\n            completed\n        }\n    }\n"])));var S=function(){var t=Object(h.a)(k),e=Object(r.a)(t,1)[0],n=Object(h.a)(T),c=Object(r.a)(n,1)[0],a=Object(h.a)(g),i=Object(r.a)(a,1)[0],u=Object(h.a)(w),l=Object(r.a)(u,2),j=l[0],b=(l[1].loading,Object(f.a)($)),p=b.data,O=b.loading,x=b.error,v=Object(o.b)(),S=(v.loginWithRedirect,v.logout,v.isAuthenticated),N=v.loading,y=function(t,e){i({variables:{id:t,completed:!e}})},_=function(t){c({variables:{id:t}})},A=function(t,n){n&&!/^\s*$/.test(n.text)&&e({variables:{id:t,title:n}})};return O||N?Object(d.jsx)("p",{children:"Loading"}):S?x?Object(d.jsx)("p",{children:"Error"}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"What's the plan for Today?"}),Object(d.jsx)(s,{onSubmit:function(t){if(t.task&&!/^\s*$/.test(t.text)){var e={title:t.task};j({variables:e})}}}),p.map((function(t){return Object(d.jsx)(m,{todo:{id:t.id,task:t.title,completed:t.completed},completeTodo:y,removeTodo:_,updateTodo:A})}))]}):Object(d.jsx)("p",{children:"You are not authenticated"})};n(74);var N=function(){return Object(d.jsx)("div",{className:"todo-app",children:Object(d.jsx)(S,{})})},y=n(49),_=n(46),A=n.n(_),C=n(56),q=n(88),B=n(99),E=n(102),I=n(100),D=n(59),F=n(57),R=n(25);var z=function(t){var e=t.children,n=Object(o.b)(),a=n.isAuthenticated,i=n.getAccessTokenSilently,s=Object(c.useState)(),u=Object(r.a)(s,2),l=u[0],j=u[1];Object(c.useEffect)((function(){(function(){var t=Object(C.a)(A.a.mark((function t(){var e;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,i();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0="";case 7:e=t.t0,j(e);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[a,i]);var b=Object(D.a)((function(t,e){var n=e.headers;return l?{headers:Object(y.a)(Object(y.a)({},n),{},{Authorization:"Bearer ".concat(l)})}:{headers:n}})),p=new F.a({uri:R["hasura-uri"],options:{reconnect:!0,connectionParams:function(){return{headers:{Authorization:"Bearer ".concat(l)}}}}}),O=new q.a({link:Object(B.a)(b,p),cache:new E.a({typePolicies:{Subscription:{fields:{todos:{merge:!1}}}}})});return Object(d.jsx)(I.a,{client:O,children:e})};i.a.render(Object(d.jsx)(o.a,{domain:R["auth-domain"],clientId:R["auth-clinet-id"],redirectUri:R["auth-redirect-uri"],audience:R["auth-audience"],children:Object(d.jsx)(z,{children:Object(d.jsx)(N,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.56a5fbdb.chunk.js.map